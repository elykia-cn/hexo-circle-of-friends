# api接口说明

## /all

**描述：**

返回数据库统计信息和文章信息列表。

**请求方式:  GET**

**请求参数说明：**

| 字段名 | 字段说明                                        | 字段类型 | 默认值  | 是否必填 |
| :----- | :---------------------------------------------- | :------- | ------- | :------- |
| start  | 文章信息列表从 按rule排序后的顺序 的开始位置    | integer  | 0       | 否       |
| end    | 文章信息列表从 按rule排序后的顺序 的结束位置    | integer  | -1      | 否       |
| rule   | 文章排序规则（创建时间created/更新时间updated） | string   | updated | 否       |

## /friend

**描述：**

返回数据库所有友链

**请求方式:  GET**

**请求参数说明：**

无参数。

## /randomfriend

**描述：**

从数据库随机返回指定个数个友链

**请求方式:  GET**

**请求参数说明：**

| 字段名 | 字段说明          | 字段类型 | 默认值 | 是否必填 |
| :----- | :---------------- | :------- | ------ | :------- |
| num    | 返回num个友链信息 | integer  | 1      | 否       |

## /randompost

**描述：**

随机返回指定个数篇文章信息

**请求方式:  GET**

**请求参数说明：**

| 字段名 | 字段说明          | 字段类型 | 默认值 | 是否必填 |
| :----- | :---------------- | :------- | ------ | :------- |
| num    | 返回num篇文章信息 | integer  | 1      | 否       |

## /post

**描述：**

指定一个链接，返回该链接的数据库内文章信息列表

**请求方式:  GET**

**请求参数说明：**

| 字段名 | 字段说明                                           | 字段类型 | 默认值  | 是否必填 |
| :----- | :------------------------------------------------- | :------- | ------- | :------- |
| link   | 链接地址，如果为None，则随机返回一个友链的文章     | string   | None    | 否       |
| num    | 指定链接的文章信息列表 按rule排序后的顺序的前num篇 | integer  | -1      | 否       |
| rule   | 文章排序规则（创建时间created/更新时间updated）    | string   | created | 否       |

## /friendstatus

**描述：**

按照指定时间划分失联/未失联的友链信息，默认距离今天2个月以上（60天以上）判定为失联友链。判断逻辑是根据数据库中保存的文章进行判断，比如：某个友链在数据库中**没有保存任何一篇**文章，则会将其归类为失联友链。

**请求方式:  GET**

**请求参数说明：**

| 字段名 | 字段说明                                          | 字段类型 | 默认值 | 是否必填 |
| :----- | :------------------------------------------------ | :------- | ------ | :------- |
| days   | 天数，默认为60天，取自配置文件中的`OUTDATE_CLEAN` | integer  | 60     | 否       |

## /postjson

**描述：**

获取**公共库**中指定链接列表的文章信息列表

**请求方式:  GET**

**请求参数说明：**

| 字段名   | 字段说明                                        | 字段类型 | 默认值  | 是否必填 |
| :------- | :---------------------------------------------- | :------- | ------- | :------- |
| jsonlink | 友链链接json的cdn地址                           | string   |         | **是**   |
| start    | 文章信息列表从 按rule排序后的顺序 的开始位置    | integer  | 0       | 否       |
| end      | 文章信息列表从 按rule排序后的顺序 的结束位置    | integer  | -1      | 否       |
| rule     | 文章排序规则（创建时间created/更新时间updated） | string   | updated | 否       |

## /version

**描述：**

获取当前版本号以及最新版本号。

**请求方式:  GET**

**请求参数说明：**

无参数。

**返回格式说明**：

| 字段名          | 字段说明                                              |
| :-------------- | :---------------------------------------------------- |
| status          | 版本状态，0：不需要更新；1：需要更新；2：检查更新失败 |
| current_version | 当前版本号                                            |
| latest_version  | 最新版本号                                            |
